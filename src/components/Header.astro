---
import { type Locale, t, getAlternateUrl } from '../i18n/index';
import ThemeToggle from './svelte/ThemeToggle.svelte';
import MobileNav from './svelte/MobileNav.svelte';

interface Props {
  locale: Locale;
}

const { locale } = Astro.props;
const i = t(locale);
const alternateUrl = getAlternateUrl(locale);

const navLinks = [
  { href: '#about', label: i.nav.about },
  { href: '#skills', label: i.nav.skills },
  { href: '#experience', label: i.nav.experience },
  { href: '#education', label: i.nav.education },
  { href: '#projects', label: i.nav.projects },
  { href: '#contact', label: i.nav.contact },
];
---

<header class="fixed top-0 left-0 right-0 z-50 border-b border-[var(--color-outline-variant)] bg-[var(--color-surface)]/95 backdrop-blur-sm dark:border-[var(--color-dark-outline-variant)] dark:bg-[var(--color-dark-surface)]/95" role="banner">
  <div class="container flex items-center justify-between" style="height: 4rem;">
    <a href={`/${locale}/`} class="text-[length:var(--font-size-title-lg)] font-bold text-[color:var(--color-on-surface)] no-underline dark:text-[color:var(--color-dark-on-surface)]" aria-label="Pedro Monteiro - Home">
      PM
    </a>

    <nav class="hidden items-center md:flex" aria-label={locale === 'en' ? 'Main navigation' : 'Navegação principal'}>
      <ul role="list" class="flex items-center gap-[var(--spacing-lg)]" style="list-style: none; margin: 0; padding: 0;">
        {navLinks.map((link) => (
          <li>
            <a
              href={link.href}
              class="text-[length:var(--font-size-label-lg)] font-medium text-[color:var(--color-on-surface-variant)] no-underline transition-opacity duration-[var(--duration-fast)] hover:opacity-70 dark:text-[color:var(--color-dark-on-surface-variant)]"
            >
              {link.label}
            </a>
          </li>
        ))}
      </ul>
    </nav>

    <div class="flex items-center gap-[var(--spacing-sm)]">
      <a
        href={alternateUrl}
        class="flex min-h-[2.75rem] min-w-[2.75rem] items-center justify-center rounded-[var(--radius-sm)] text-[length:var(--font-size-label-lg)] font-medium text-[color:var(--color-on-surface-variant)] no-underline transition-opacity duration-[var(--duration-fast)] hover:opacity-70 dark:text-[color:var(--color-dark-on-surface-variant)]"
        aria-label={i.nav.switchLanguage}
      >
        {locale === 'en' ? 'PT' : 'EN'}
      </a>

      <ThemeToggle client:load label={i.nav.toggleTheme} />

      <MobileNav
        client:load
        navLinks={navLinks}
        openLabel={i.nav.openMenu}
        closeLabel={i.nav.closeMenu}
        navLabel={locale === 'en' ? 'Main navigation' : 'Navegação principal'}
      />
    </div>
  </div>
</header>
